version: '3'
services:
  api:
    build: ../nodejs/
    image: uea-test
    container_name: uea-api-test
    ports:
      - "3001:3000"
    volumes:
      - ../../:/app
    environment:
      - DB_PASSWORD=u34p4ss-t3st3
      - DB_HOST=mysql-test
      - DB_PORT=3307
      - TEST=local
    links:
      - mysql:mysql-test
    depends_on:
      - mysql

  mysql:
    image: mysql
    restart: always
    container_name: uea-datumbazo-test
    environment:
      - MYSQL_ROOT_PASSWORD=u34p4ss-t3st3
      - MYSQL_DATABASE=uea
    volumes:
      - ../mysql/uea-custom.cnf:/etc/mysql/conf.d/custom.cnf
    ports:
      - "3307:3306"
